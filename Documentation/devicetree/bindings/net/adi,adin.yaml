# SPDX-License-Identifier: GPL-2.0+
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/adi,adin.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Analog Devices ADIN1200/ADIN1300 PHY

maintainers:
  - Alexandru Ardelean <alexandru.ardelean@analog.com>

description: |
  Bindings for Analog Devices Industrial Ethernet PHYs

allOf:
  - $ref: ethernet-phy.yaml#

properties:
  adi,rx-internal-delay-ps:
    description: |
      RGMII RX Clock Delay used only when PHY operates in RGMII mode with
      internal delay (phy-mode is 'rgmii-id' or 'rgmii-rxid') in pico-seconds.
    enum: [ 1600, 1800, 2000, 2200, 2400 ]
    default: 2000

  adi,tx-internal-delay-ps:
    description: |
      RGMII TX Clock Delay used only when PHY operates in RGMII mode with
      internal delay (phy-mode is 'rgmii-id' or 'rgmii-txid') in pico-seconds.
    enum: [ 1600, 1800, 2000, 2200, 2400 ]
    default: 2000

  adi,fifo-depth-bits:
    description: |
      When operating in RMII mode, this option configures the FIFO depth.
    enum: [ 4, 8, 12, 16, 20, 24 ]
    default: 8

  adi,1588-rx-sop-delays-cycles:
    allOf:
      - $ref: /schemas/types.yaml#definitions/uint8-array
      - items:
          - minItems: 3
            maxItems: 3
    description: |
      Enables Start Packet detection (SOP) for received IEEE 1588 time stamp
      controls, and configures the number of cycles (of the MII RX_CLK clock)
      to delay the indication of RX SOP frames for 10/100/1000 BASE-T links.
      The first element (in the array) configures the delay for 10BASE-T,
      the second for 100BASE-T, and the third for 1000BASE-T.

  adi,1588-rx-sop-pin-name:
    description: |
      This option must be used in together with 'adi,1588-rx-sop-delays-cycles'
      to specify which physical pin should be used to signal the MAC that
      the PHY is currently processing an IEEE 1588 timestamp control packet.
      The driver will report an error if the value of this property is the
      same as 'adi,1588-tx-sop-pin-name'
    enum:
      - gp_clk
      - link_st
      - int_n
      - led_0

  adi,1588-tx-sop-delays-ns:
    allOf:
      - $ref: /schemas/types.yaml#definitions/uint8-array
      - items:
          - minItems: 3
            maxItems: 3
    description: |
      Enables Start Packet detection (SOP) for IEEE 1588 time stamp controls,
      and configures the number of nano-seconds to delay the indication of
      TX frames for 10/100/1000 BASE-T links.
      The first element (in the array) configures the delay for 10BASE-T,
      the second for 100BASE-T, and the third for 1000BASE-T.
      The delays must be multiples of 8 ns (i.e. 8, 16, 24, etc).

  adi,1588-tx-sop-pin-name:
    description: |
      This option must be used in together with 'adi,1588-tx-sop-delays-ns'
      to specify which physical pin should be used to signal the MAC that
      the PHY is currently processing an IEEE 1588 timestamp control packet
      on the TX path.
      The driver will report an error if the value of this property is the
      same as 'adi,1588-rx-sop-pin-name'
    enum:
      - gp_clk
      - link_st
      - int_n
      - led_0

examples:
  - |
    ethernet {
        #address-cells = <1>;
        #size-cells = <0>;

        phy-mode = "rgmii-id";

        ethernet-phy@0 {
            reg = <0>;

            adi,rx-internal-delay-ps = <1800>;
            adi,tx-internal-delay-ps = <2200>;
        };
    };
  - |
    ethernet {
        #address-cells = <1>;
        #size-cells = <0>;

        phy-mode = "rmii";

        ethernet-phy@1 {
            reg = <1>;

            adi,fifo-depth-bits = <16>;

            adi,1588-rx-sop-delays-cycles = [ 00 00 00 ];
            adi,1588-rx-sop-pin-name = "int_n";

            adi,1588-tx-sop-delays-ns = [ 00 08 10 ];
            adi,1588-tx-sop-pin-name = "led_0";
        };
    };
