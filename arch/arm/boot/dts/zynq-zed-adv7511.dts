// SPDX-License-Identifier: GPL-2.0
/*
 *  Copyright (C) 2020 - Analog Devices Inc.
 */
/dts-v1/;
#include "zynq-zed.dts"

#define zynq_hdmi_code_dai	adv7511

#include "zynq-hdmi-pl.dtsi"

&fpga_i2c {
	adv7511: adv7511@39 {
		compatible = "adi,adv7511";
		reg = <0x39>, <0x3f>;
		reg-names = "primary", "edid";

		adi,input-depth = <8>;
		adi,input-colorspace = "yuv422";
		adi,input-clock = "1x";
		adi,input-style = <1>;
		adi,input-justification = "right";
		adi,clock-delay = <0>;

		#sound-dai-cells = <1>;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				zynq_hdmi_in: endpoint {
					remote-endpoint = <&axi_hdmi_out>;
				};
			};

			port@1 {
				reg = <1>;
			};
		};
	};

	adau1761: adau1761@3b {
		compatible = "adi,adau1761";
		reg = <0x3b>;

		clocks = <&audio_clock>;
		clock-names = "mclk";

		#sound-dai-cells = <0>;
	};
};

/ {

	axi_i2s_0: axi-i2s@77600000 {
		compatible = "adi,axi-i2s-1.00.a";
		reg = <0x77600000 0x1000>;
		dmas = <&dmac_s 1 &dmac_s 2>;
		dma-names = "tx", "rx";
		clocks = <&clkc 15>, <&audio_clock>;
		clock-names = "axi", "ref";

		#sound-dai-cells = <0>;
	};

	zed_sound {
		compatible = "simple-audio-card";
		simple-audio-card,name = "ZED ADAU1761";
		simple-audio-card,widgets =
			"Microphone", "Mic In",
			"Headphone", "Headphone Out",
			"Line", "Line In",
			"Line", "Line Out";
		simple-audio-card,routing =
			"Line Out", "LOUT",
			"Line Out", "ROUT",
			"Headphone Out", "LHP",
			"Headphone Out", "RHP",
			"Mic In", "MICBIAS",
			"LINN", "Mic In",
			"RINN", "Mic In",
			"LAUX", "Line In",
			"RAUX", "Line In";

		simple-audio-card,dai-link@0 {
			format = "i2s";
			cpu {
				sound-dai = <&axi_i2s_0>;
			};
			codec {
				sound-dai = <&adau1761>;
			};
		};
	};

	leds {
		compatible = "gpio-leds";
		ld0 {
			label = "ld0:red";
			gpios = <&gpio0 73 0>;
		};

		ld1 {
			label = "ld1:red";
			gpios = <&gpio0 74 0>;
		};

		ld2 {
			label = "ld2:red";
			gpios = <&gpio0 75 0>;
		};

		ld3 {
			label = "ld3:red";
			gpios = <&gpio0 76 0>;
		};

		ld4 {
			label = "ld4:red";
			gpios = <&gpio0 77 0>;
		};

		ld5 {
			label = "ld5:red";
			gpios = <&gpio0 78 0>;
		};

		ld6 {
			label = "ld6:red";
			gpios = <&gpio0 79 0>;
		};

		ld7 {
			label = "ld7:red";
			gpios = <&gpio0 80 0>;
		};
	};
};
